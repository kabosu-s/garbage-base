__NUXT_JSONP__("/m708qzbres-w", (function(a){return {data:[{id:"m708qzbres-w",createdAt:"2021-08-09T05:47:32.622Z",updatedAt:a,publishedAt:"2021-08-13T08:17:56.660Z",revisedAt:a,title:"制作時メモ【titleとdescriptionをページ毎に設定する】",mainimage:{url:"https:\u002F\u002Fimages.microcms-assets.io\u002Fassets\u002F30dedbc29bbf472a8bd932f7df5e77d6\u002Feeac577d4a4541458a68d4fa8714c847\u002Fvue_back.jpg",height:600,width:1200},body:"\u003Chtml\u003E\u003Chead\u003E\u003C\u002Fhead\u003E\u003Cbody\u003E\u003Cp\u003Eやりたいこと。\u003Cbr\u003Eページ毎にタイトルとディスクリプションが変わるようにする。\u003Cbr\u003E\u003Cbr\u003Erouter周りを調整して、実現させようと思います。\u003Cbr\u003E\u003Cbr\u003Eこちらの記事からコードガッツリいただきました。\u003Cbr\u003E\u003Cbr\u003E\u003Ca href=\"https:\u002F\u002Fqiita.com\u002Fshizen-shin\u002Fitems\u002F1fc2d1f5b4add2c0ed2c\" target=\"_blank\" rel=\"noopener noreferrer\"\u003E【Vue.js】Vue CLIで作成したページのtitleとdescriptionを変更する方法\u003C\u002Fa\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2 id=\"h62d7c782a4\"\u003Erouterにmetaフィールドを追加\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003E下記のmeta部分を記述。\u003C\u002Fspan\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003E\u002Fsrc\u002Frouter\u002Findex.js\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003Econst routes = [\n  {\n    \u003Cspan class=\"hljs-built_in\"\u003Epath\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'\u002F'\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-keyword\"\u003Ename\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'Home'\u003C\u002Fspan\u003E,\n    component: Home,\n    meta: { \u003Cspan class=\"hljs-built_in\"\u003Etitle\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'ページタイトル'\u003C\u002Fspan\u003E, desc: \u003Cspan class=\"hljs-string\"\u003E'ディスクリプションを記述'\u003C\u002Fspan\u003E } \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F追加\u003C\u002Fspan\u003E\n  }\n]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2 id=\"h86d7ef4dbe\"\u003Eapp.vueにtitleとdescriptionをセットするメソッドを追加\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003Emethodsオプションに下記を記述。\u003C\u002Fspan\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003E↑プロパティ（タイトルやディスクリプション）へのアクセス方法は\u003C\u002Fspan\u003E\u003Ccode\u003Eルートインスタンス.meta.設定した変数名\u003C\u002Fcode\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003E\u002Fsrc\u002FApp.vue\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    methods: {\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Ftitleをセットするメソッド\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003EcreateTitleDesc\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-params\"\u003ErouteInstance\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n            \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F引数でrouteインスタンスを渡すmountedオプションで代入\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F route.meta.titleで設定したtitleを取得\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (routeInstance.meta.title) {\n                \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Ftitleが設定されていれば\u003C\u002Fspan\u003E\n                \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E setTitle = routeInstance.meta.title + \u003Cspan class=\"hljs-string\"\u003E\" | Garbage Base\"\u003C\u002Fspan\u003E;\n                \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.title = setTitle;\n            } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n                \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Ftitleが設定されていない時\u003C\u002Fspan\u003E\n                \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.title = \u003Cspan class=\"hljs-string\"\u003E\"Garbage Base\"\u003C\u002Fspan\u003E;\n            }\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fdescriptionを判定\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (routeInstance.meta.desc) { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fdescが設定されていれば\u003C\u002Fspan\u003E\n                \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E setDesc = routeInstance.meta.desc;\n                \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.querySelector(\u003Cspan class=\"hljs-string\"\u003E\"meta[name='description']\"\u003C\u002Fspan\u003E).setAttribute(\u003Cspan class=\"hljs-string\"\u003E'content'\u003C\u002Fspan\u003E, setDesc)\n            } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fdescが設定されていない時\u003C\u002Fspan\u003E\n                \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.querySelector(\u003Cspan class=\"hljs-string\"\u003E\"meta[name='description']\"\u003C\u002Fspan\u003E).setAttribute(\u003Cspan class=\"hljs-string\"\u003E'content'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'description is not set'\u003C\u002Fspan\u003E)\n            }\n        },\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2 id=\"h80f2ed8b8b\"\u003Emountedオプションをセット\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cspan style=\"color:#333333\"\u003E\u002Fsrc\u002FApp.vue\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    mounted: \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E routeInstance = \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.$route; \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Frouteインスタンス（$rounte）を変数(routeInstance)に代入\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.createTitleDesc(routeInstance); \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F実行。method呼ぶときはthis.\u003C\u002Fspan\u003E\n    },\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2 id=\"ha1ac1a966d\"\u003Ewatchオプションをセット\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cspan style=\"color:#333333\"\u003Etitleやdescriptionに変更があった場合に、変更内容を自動反映するようwatchオプションを追加する。\u003C\u002Fspan\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan style=\"color:#333333\"\u003E\u002Fsrc\u002FApp.vue\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    watch: {\n        \u003Cspan class=\"hljs-constructor\"\u003E$route(\u003Cspan class=\"hljs-params\"\u003ErouteInstance\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E {\n            this.create\u003Cspan class=\"hljs-constructor\"\u003ETitleDesc(\u003Cspan class=\"hljs-params\"\u003ErouteInstance\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E;\n        },\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2 id=\"h25b67806e4\"\u003Epubulic&gt;index.htmlにdescription属性を追加\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cbr\u003E書き換え対象のDOMを記述する\u003Cbr\u003E以下の記述で上記タグを参照することができる。\u003Ccode\u003Edocument.querySelector(\"meta[name='description']\")\u003C\u002Fcode\u003E\u003Cbr\u003E\u003Cbr\u003E\u002Fpublic\u002Findex.html\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    &lt;meta \u003Cspan class=\"hljs-attribute\"\u003Ename\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"description\"\u003C\u002Fspan\u003E&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E完了！\u003Cbr\u003E\u003Cbr\u003E…ブログ個別記事は…どうしたらいい？\u003Cbr\u003Eひとまず記事側のvue\bで直接書き換えてみました。\u003Cbr\u003E\u003Cbr\u003E\u002Fsrc\u002Fviews\u002FArticleDetail.vue\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    methods: {\n        \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgetArticle\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F略           \u003C\u002Fspan\u003E\n         \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Ftitleを書き換える\u003C\u002Fspan\u003E\n         document.title = \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.article.title;\n        },\n   }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003Eつづきます\u003C\u002Fp\u003E\u003C\u002Fbody\u003E\u003C\u002Fhtml\u003E",tag:["WEB"]}],fetch:{},mutations:void 0}}("2021-08-18T11:39:51.069Z")));