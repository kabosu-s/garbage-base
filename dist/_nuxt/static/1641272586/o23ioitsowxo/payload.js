__NUXT_JSONP__("/o23ioitsowxo", (function(a,b){return {data:[{id:"o23ioitsowxo",createdAt:a,updatedAt:b,publishedAt:a,revisedAt:b,title:"制作時メモ【マウスストーカーを追加】",mainimage:{url:"https:\u002F\u002Fimages.microcms-assets.io\u002Fassets\u002F30dedbc29bbf472a8bd932f7df5e77d6\u002Feeac577d4a4541458a68d4fa8714c847\u002Fvue_back.jpg",height:600,width:1200},body:"\u003Chtml\u003E\u003Chead\u003E\u003C\u002Fhead\u003E\u003Cbody\u003E\u003Cp\u003E数10年前に流行ってたやつ…なんか最近流行ってますよね～。\u003Cbr\u003Eいらない機能感が甚だしいですが、せっかくのガラクタ置き場なので追加してみます。\u003Cbr\u003E\u003Cbr\u003Eコンポーネントにしてみました。\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E&lt;template&gt;\n    &lt;div \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Emouse\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Estalker\u003C\u002Fspan\u003E\" :\u003Cspan class=\"hljs-type\"\u003Eclass=\"{ target: set }\"&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n        &lt;span&gt;&lt;\u002Fspan&gt;\n    &lt;\u002Fdiv&gt;\n&lt;\u002Ftemplate&gt;\n\n&lt;script&gt;\nexport \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E {\n    name: \u003Cspan class=\"hljs-string\"\u003E\"MouseStalker\"\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-keyword\"\u003Edata\u003C\u002Fspan\u003E() {\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E {\n            stalker: { x: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E, y: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E },\n            mouse: { x: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E, y: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E },\n            mouseStalker: \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E,\n            targets: \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E,\n            \u003Cspan class=\"hljs-keyword\"\u003Eset\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E,\n        };\n    },\n    mounted() {\n        \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.setup();\n        document.addEventListener(\u003Cspan class=\"hljs-string\"\u003E\"mousemove\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mousemove);\n        \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.target.addEventListener(\u003Cspan class=\"hljs-string\"\u003E\"mouseover\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.hovertarget);\n        \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.target.addEventListener(\u003Cspan class=\"hljs-string\"\u003E\"mouseout\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.leavetarget);\n    },\n    methods: {\n        setup() {\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouseStalker = document.querySelector(\u003Cspan class=\"hljs-string\"\u003E\".mouse-stalker\"\u003C\u002Fspan\u003E);\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.targets = document.querySelector(\u003Cspan class=\"hljs-string\"\u003E\".nav\"\u003C\u002Fspan\u003E);\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.update();\n        },\n        update() {\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.x += (\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouse.x - \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.x) * \u003Cspan class=\"hljs-number\"\u003E0.1\u003C\u002Fspan\u003E;\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.y += (\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouse.y - \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.y) * \u003Cspan class=\"hljs-number\"\u003E0.1\u003C\u002Fspan\u003E;\n            let x = Math.round(\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.x * \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003E) \u002F \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003E;\n            let y = Math.round(\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.stalker.y * \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003E) \u002F \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003E;\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouseStalker.style.transform =\n                `translate3d(` + x + \u003Cspan class=\"hljs-string\"\u003E\"px,\"\u003C\u002Fspan\u003E + y + \u003Cspan class=\"hljs-string\"\u003E\"px, 0)\"\u003C\u002Fspan\u003E;\n            requestAnimationFrame(\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.update);\n        },\n        mousemove(e) {\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouse.x = e.clientX;\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mouse.y = e.clientY;\n        },\n        hovertarget() {\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-keyword\"\u003Eset\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E;\n        },\n        leavetarget() {\n            \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-keyword\"\u003Eset\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E;\n        },\n    },\n};\n&lt;\u002Fscript&gt;\n\n&lt;style lang=\u003Cspan class=\"hljs-string\"\u003E\"scss\"\u003C\u002Fspan\u003E scoped&gt;\n.mouse-stalker {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003Epx;\n    height: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003Epx;\n    position: fixed;\n    top: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n    left: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n    z-index: \u003Cspan class=\"hljs-number\"\u003E10000\u003C\u002Fspan\u003E;\n    pointer-events: none;\n    mix-blend-mode: exclusion;\n    &gt; span {\n        width: \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003Epx;\n        height: \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003Epx;\n        border-radius: \u003Cspan class=\"hljs-number\"\u003E50\u003C\u002Fspan\u003E%;\n        background: $c_base;\n        border: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003Epx solid $c_base;\n        flex-shrink: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n        transition: all \u003Cspan class=\"hljs-number\"\u003E0.3\u003C\u002Fspan\u003Es ease-\u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E;\n    }\n    &amp;.target &gt; span {\n        width: \u003Cspan class=\"hljs-number\"\u003E40\u003C\u002Fspan\u003Epx;\n        height: \u003Cspan class=\"hljs-number\"\u003E40\u003C\u002Fspan\u003Epx;\n        background: transparent;\n    }\n}\n&lt;\u002Fstyle&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003Eリンクにホバーしたときの見た目を変えようと思ったのですが…複数のセレクタを選択できなかった…。\u003Cbr\u003Eので、宿題にします。\u003Cbr\u003E\u003Cbr\u003Eちなみにほんとに作ろうと思ってるのは、また今度。\u003Cbr\u003E\u003Cbr\u003E（9\u002F18追記）\u003Cbr\u003Eこちらを参考に直してみました。\u003Cbr\u003E\u003Ca href=\"https:\u002F\u002Fmyscreate.com\u002Fdom-acquisition\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003E[JS]getElementByIdでは上手くいくのにgetElementsByClassNameでは上手くDOM操作が出来ないとき\u003C\u002Fa\u003E\u003Cbr\u003E\u003Cbr\u003E複数セレクタを取得した場合はHTMLElementではなく、HTMLCollectionとやらになるそうで…？\u003Cbr\u003E一個、一個をforで回して…\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E            this.targets = document.get\u003Cspan class=\"hljs-constructor\"\u003EElementsByTagName(\u003Cspan class=\"hljs-string\"\u003E\"a\"\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E;\n            this.targets.for\u003Cspan class=\"hljs-constructor\"\u003EEach((\u003Cspan class=\"hljs-params\"\u003Etarget\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E =&gt; {\n                target.add\u003Cspan class=\"hljs-constructor\"\u003EEventListener(\u003Cspan class=\"hljs-string\"\u003E\"mouseover\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-params\"\u003Ehovertarget\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Efalse\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E;\n                target.add\u003Cspan class=\"hljs-constructor\"\u003EEventListener(\u003Cspan class=\"hljs-string\"\u003E\"mouseout\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-params\"\u003Eleavetarget\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Efalse\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E;\n            });\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003Eで、複数セレクタは取れたのですが…関数実行後に読み込まれたリンクたちが無視されている。\u003Cbr\u003Eなるほど…？\u003Cbr\u003E\u003Cbr\u003Eルーターを監視して、画面を切り替えたら↑を実行させてみた。\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E    watch: {\n        $route: \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n                \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.setpointer();\n        },\n    },\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cbr\u003E\u003Cbr\u003Eなんか違う気がするけど一旦こちらで\u003Cbr\u003E\u003C\u002Fp\u003E\u003C\u002Fbody\u003E\u003C\u002Fhtml\u003E",tag:["WEB"]}],fetch:{},mutations:void 0}}("2021-09-12T12:54:50.884Z","2021-09-23T08:23:36.648Z")));